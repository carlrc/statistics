"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const round_1 = require("../common/round");
const createFrequencyDistribution = (list, lowerLimit, classWidth, scale, frequencyDistributions) => {
    if (list.length === 0) {
        return frequencyDistributions;
    }
    const fd = createClass(lowerLimit, classWidth, scale);
    const elementsOutsideClassBoundary = list.filter((x) => x > fd.class_boundary_upper);
    const fdWithFrequency = Object.assign({ frequency: (list.length - elementsOutsideClassBoundary.length) }, fd);
    const newLowerLimit = fdWithFrequency.class_limit_upper + 1;
    const distributions = frequencyDistributions ? [...frequencyDistributions, fdWithFrequency] : [fdWithFrequency];
    return createFrequencyDistribution(elementsOutsideClassBoundary, newLowerLimit, classWidth, scale, distributions);
};
exports.createFrequencyDistribution = createFrequencyDistribution;
const createClass = (lowerLimit, classWidth, scale) => {
    const upperLimit = round_1.round((lowerLimit + classWidth) - 1, scale);
    return {
        class_limit_lower: lowerLimit,
        class_limit_upper: upperLimit,
        class_boundary_lower: round_1.round((lowerLimit - 0.5), scale),
        class_boundary_upper: round_1.round((upperLimit + 0.5), scale),
        class_midpoint: round_1.round((lowerLimit + upperLimit) / 2, scale),
        class_width: classWidth
    };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlX2ZyZXF1ZW5jeV9kaXN0cmlidXRpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjcmVhdGVfZnJlcXVlbmN5X2Rpc3RyaWJ1dGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLDJDQUF3QztBQUd4QyxNQUFNLDJCQUEyQixHQUFHLENBQUMsSUFBYyxFQUNkLFVBQWtCLEVBQ2xCLFVBQWtCLEVBQ2xCLEtBQVksRUFDWixzQkFBcUQsRUFBZ0MsRUFBRTtJQUN4SCxJQUFJLElBQUksQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1FBQ25CLE9BQU8sc0JBQXNCLENBQUM7S0FDakM7SUFFRCxNQUFNLEVBQUUsR0FBRyxXQUFXLENBQUMsVUFBVSxFQUFFLFVBQVUsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUN0RCxNQUFNLDRCQUE0QixHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsb0JBQW9CLENBQUMsQ0FBQztJQUNyRixNQUFNLGVBQWUsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUMsU0FBUyxFQUFFLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyw0QkFBNEIsQ0FBQyxNQUFNLENBQUMsRUFBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQzVHLE1BQU0sYUFBYSxHQUFHLGVBQWUsQ0FBQyxpQkFBaUIsR0FBRyxDQUFDLENBQUM7SUFDNUQsTUFBTSxhQUFhLEdBQUcsc0JBQXNCLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxzQkFBc0IsRUFBRSxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUVoSCxPQUFPLDJCQUEyQixDQUFDLDRCQUE0QixFQUFFLGFBQWEsRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLGFBQWEsQ0FBQyxDQUFDO0FBQ3RILENBQUMsQ0FBQztBQWVFLGtFQUEyQjtBQWIvQixNQUFNLFdBQVcsR0FBRyxDQUFDLFVBQWtCLEVBQUUsVUFBa0IsRUFBRSxLQUFZLEVBQThCLEVBQUU7SUFDckcsTUFBTSxVQUFVLEdBQUcsYUFBSyxDQUFDLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUMvRCxPQUFPO1FBQ0gsaUJBQWlCLEVBQUUsVUFBVTtRQUM3QixpQkFBaUIsRUFBRSxVQUFVO1FBQzdCLG9CQUFvQixFQUFFLGFBQUssQ0FBQyxDQUFDLFVBQVUsR0FBRyxHQUFHLENBQUMsRUFBRSxLQUFLLENBQUM7UUFDdEQsb0JBQW9CLEVBQUUsYUFBSyxDQUFDLENBQUMsVUFBVSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEtBQUssQ0FBQztRQUN0RCxjQUFjLEVBQUUsYUFBSyxDQUFDLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUMsRUFBRSxLQUFLLENBQUM7UUFDM0QsV0FBVyxFQUFFLFVBQVU7S0FDMUIsQ0FBQztBQUNOLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNjYWxlIH0gZnJvbSBcIi4uL2NvbW1vbi9pbnRlcmZhY2VzL3NjYWxlX2VudW1cIjtcbmltcG9ydCB7IHJvdW5kIH0gZnJvbSBcIi4uL2NvbW1vbi9yb3VuZFwiO1xuaW1wb3J0IHsgRnJlcXVlbmN5RGlzdHJpYnV0aW9uQ2xhc3MgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL2ZyZXF1ZW5jeV9kaXN0cmlidXRpb25cIjtcblxuY29uc3QgY3JlYXRlRnJlcXVlbmN5RGlzdHJpYnV0aW9uID0gKGxpc3Q6IG51bWJlcltdLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb3dlckxpbWl0OiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NXaWR0aDogbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiBTY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmVxdWVuY3lEaXN0cmlidXRpb25zPzogRnJlcXVlbmN5RGlzdHJpYnV0aW9uQ2xhc3NbXSk6IEZyZXF1ZW5jeURpc3RyaWJ1dGlvbkNsYXNzW10gPT4ge1xuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZnJlcXVlbmN5RGlzdHJpYnV0aW9ucztcbiAgICB9XG5cbiAgICBjb25zdCBmZCA9IGNyZWF0ZUNsYXNzKGxvd2VyTGltaXQsIGNsYXNzV2lkdGgsIHNjYWxlKTtcbiAgICBjb25zdCBlbGVtZW50c091dHNpZGVDbGFzc0JvdW5kYXJ5ID0gbGlzdC5maWx0ZXIoKHgpID0+IHggPiBmZC5jbGFzc19ib3VuZGFyeV91cHBlcik7XG4gICAgY29uc3QgZmRXaXRoRnJlcXVlbmN5ID0gT2JqZWN0LmFzc2lnbih7ZnJlcXVlbmN5OiAobGlzdC5sZW5ndGggLSBlbGVtZW50c091dHNpZGVDbGFzc0JvdW5kYXJ5Lmxlbmd0aCl9LCBmZCk7XG4gICAgY29uc3QgbmV3TG93ZXJMaW1pdCA9IGZkV2l0aEZyZXF1ZW5jeS5jbGFzc19saW1pdF91cHBlciArIDE7XG4gICAgY29uc3QgZGlzdHJpYnV0aW9ucyA9IGZyZXF1ZW5jeURpc3RyaWJ1dGlvbnMgPyBbLi4uZnJlcXVlbmN5RGlzdHJpYnV0aW9ucywgZmRXaXRoRnJlcXVlbmN5XSA6IFtmZFdpdGhGcmVxdWVuY3ldO1xuXG4gICAgcmV0dXJuIGNyZWF0ZUZyZXF1ZW5jeURpc3RyaWJ1dGlvbihlbGVtZW50c091dHNpZGVDbGFzc0JvdW5kYXJ5LCBuZXdMb3dlckxpbWl0LCBjbGFzc1dpZHRoLCBzY2FsZSwgZGlzdHJpYnV0aW9ucyk7XG59O1xuXG5jb25zdCBjcmVhdGVDbGFzcyA9IChsb3dlckxpbWl0OiBudW1iZXIsIGNsYXNzV2lkdGg6IG51bWJlciwgc2NhbGU6IFNjYWxlKTogRnJlcXVlbmN5RGlzdHJpYnV0aW9uQ2xhc3MgPT4ge1xuICAgIGNvbnN0IHVwcGVyTGltaXQgPSByb3VuZCgobG93ZXJMaW1pdCArIGNsYXNzV2lkdGgpIC0gMSwgc2NhbGUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNsYXNzX2xpbWl0X2xvd2VyOiBsb3dlckxpbWl0LFxuICAgICAgICBjbGFzc19saW1pdF91cHBlcjogdXBwZXJMaW1pdCxcbiAgICAgICAgY2xhc3NfYm91bmRhcnlfbG93ZXI6IHJvdW5kKChsb3dlckxpbWl0IC0gMC41KSwgc2NhbGUpLFxuICAgICAgICBjbGFzc19ib3VuZGFyeV91cHBlcjogcm91bmQoKHVwcGVyTGltaXQgKyAwLjUpLCBzY2FsZSksXG4gICAgICAgIGNsYXNzX21pZHBvaW50OiByb3VuZCgobG93ZXJMaW1pdCArIHVwcGVyTGltaXQpIC8gMiwgc2NhbGUpLFxuICAgICAgICBjbGFzc193aWR0aDogY2xhc3NXaWR0aFxuICAgIH07XG59O1xuXG5leHBvcnQge1xuICAgIGNyZWF0ZUZyZXF1ZW5jeURpc3RyaWJ1dGlvblxufTtcbiJdfQ==